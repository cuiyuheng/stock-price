# è‚¡ç¥¨ä»·æ ¼èšç±»åˆ†æAPP - åä¸ºé¸¿è’™æ‰‹æœºéƒ¨ç½²æŒ‡å—

## ğŸ“± åº”ç”¨ä»‹ç»

è¿™æ˜¯ä¸€ä¸ªåŸºäºPython Kivyæ¡†æ¶å¼€å‘çš„è‚¡ç¥¨ä»·æ ¼èšç±»åˆ†æç§»åŠ¨åº”ç”¨ï¼Œå¯ä»¥å°†æ‚¨çš„è‚¡ç¥¨åˆ†æè„šæœ¬è½¬æ¢ä¸ºå¯åœ¨åä¸ºé¸¿è’™æ‰‹æœºä¸Šè¿è¡Œçš„APPã€‚

### ä¸»è¦åŠŸèƒ½
- ğŸ“Š è¾“å…¥è‚¡ç¥¨ä»£ç è·å–å®æ—¶æ•°æ®
- ğŸ” ä½¿ç”¨KMeansèšç±»ç®—æ³•åˆ†æè‚¡ä»·æ”¯æ’‘å’Œå‹åŠ›ä½
- ğŸ“ˆ ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½çš„ç”¨æˆ·ç•Œé¢

---

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆé€‰æ‹©

æ ¹æ®æ‚¨çš„é¸¿è’™ç³»ç»Ÿç‰ˆæœ¬ï¼Œé€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹æ¡ˆï¼š

### æ–¹æ¡ˆä¸€ï¼šAndroid APKå®‰è£…ï¼ˆæ¨èï¼‰
**é€‚ç”¨ç³»ç»Ÿ**ï¼šHarmonyOS 4.0åŠä¹‹å‰ç‰ˆæœ¬ï¼ˆå…¼å®¹å®‰å“åº”ç”¨ï¼‰

**ä¼˜ç‚¹**ï¼š
- å®Œæ•´çš„APPä½“éªŒ
- ç¦»çº¿è¿è¡Œ
- æ€§èƒ½æœ€ä½³

### æ–¹æ¡ˆäºŒï¼šPydroid 3ç›´æ¥è¿è¡Œ
**é€‚ç”¨ç³»ç»Ÿ**ï¼šæ‰€æœ‰æ”¯æŒå®‰å“å…¼å®¹çš„é¸¿è’™ç‰ˆæœ¬

**ä¼˜ç‚¹**ï¼š
- æ— éœ€æ‰“åŒ…
- å¿«é€Ÿéƒ¨ç½²
- ä¾¿äºè°ƒè¯•

### æ–¹æ¡ˆä¸‰ï¼šWebåº”ç”¨ï¼ˆHarmonyOS Nextï¼‰
**é€‚ç”¨ç³»ç»Ÿ**ï¼šHarmonyOS Nextï¼ˆä¸å…¼å®¹å®‰å“ï¼‰

**ä¼˜ç‚¹**ï¼š
- æ”¯æŒæœ€æ–°é¸¿è’™ç³»ç»Ÿ
- æ— éœ€å®‰è£…

---

## ğŸ“¦ æ–¹æ¡ˆä¸€ï¼šAndroid APKå®‰è£…

### ç¯å¢ƒå‡†å¤‡

#### 1. å®‰è£…å¿…è¦å·¥å…·

```bash
# å®‰è£…buildozer
pip install buildozer

# å®‰è£…Cython
pip install cython

# å®‰è£…å…¶ä»–ä¾èµ–
pip install -r requirements.txt
```

#### 2. å®‰è£…Android SDK/NDK

```bash
# è‡ªåŠ¨ä¸‹è½½å’Œé…ç½®
buildozer android debug
```

### æ‰“åŒ…æ­¥éª¤

#### æ­¥éª¤1ï¼šè¿›å…¥é¡¹ç›®ç›®å½•
```bash
cd stock_analyzer_app
```

#### æ­¥éª¤2ï¼šåˆå§‹åŒ–buildozerï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
```bash
buildozer init
```

#### æ­¥éª¤3ï¼šä¿®æ”¹buildozer.specé…ç½®
å·²æä¾›é…ç½®å¥½çš„`buildozer.spec`æ–‡ä»¶ï¼Œä¸»è¦é…ç½®é¡¹ï¼š

```ini
# åº”ç”¨ä¿¡æ¯
title = è‚¡ç¥¨ä»·æ ¼èšç±»åˆ†æ
package.name = stockanalyzer
package.domain = com.stockanalyzer
version = 1.0.0

# ä¾èµ–åº“
requirements = python3,kivy,pandas,numpy,matplotlib,scikit-learn,akshare,requests,urllib3,lxml,beautifulsoup4,openpyxl

# æƒé™
android.permissions = INTERNET,ACCESS_NETWORK_STATE,WRITE_EXTERNAL_STORAGE,READ_EXTERNAL_STORAGE

# Androidç‰ˆæœ¬
android.api = 33
android.minapi = 21
android.archs = arm64-v8a, armeabi-v7a
```

#### æ­¥éª¤4ï¼šæ„å»ºAPK
```bash
# è°ƒè¯•ç‰ˆæœ¬
buildozer android debug

# å‘å¸ƒç‰ˆæœ¬
buildozer android release
```

æ„å»ºè¿‡ç¨‹å¯èƒ½éœ€è¦30-60åˆ†é’Ÿï¼ˆé¦–æ¬¡è¿è¡Œï¼‰ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ï¼š
- Android SDK
- Android NDK
- Python for Android
- å„ç§ä¾èµ–åº“

#### æ­¥éª¤5ï¼šè·å–APKæ–‡ä»¶
æ„å»ºå®Œæˆåï¼ŒAPKæ–‡ä»¶ä½äºï¼š
```
bin/stockanalyzer-1.0.0-arm64-v8a_armeabi-v7a-debug.apk
```

### å®‰è£…åˆ°é¸¿è’™æ‰‹æœº

#### æ–¹æ³•1ï¼šç›´æ¥å®‰è£…
1. å°†APKæ–‡ä»¶ä¼ è¾“åˆ°æ‰‹æœº
2. åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­ç‚¹å‡»APKæ–‡ä»¶
3. å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨
4. å®Œæˆå®‰è£…

#### æ–¹æ³•2ï¼šADBå®‰è£…
```bash
# è¿æ¥æ‰‹æœºå¹¶å®‰è£…
adb install bin/stockanalyzer-1.0.0-arm64-v8a_armeabi-v7a-debug.apk
```

---

## ğŸ æ–¹æ¡ˆäºŒï¼šPydroid 3ç›´æ¥è¿è¡Œ

### æ­¥éª¤1ï¼šå®‰è£…Pydroid 3
1. æ‰“å¼€åä¸ºåº”ç”¨å¸‚åœº
2. æœç´¢"Pydroid 3"
3. ä¸‹è½½å¹¶å®‰è£…

### æ­¥éª¤2ï¼šå®‰è£…ä¾èµ–åº“
1. æ‰“å¼€Pydroid 3åº”ç”¨
2. ç‚¹å‡»å·¦ä¸Šè§’çš„èœå•ï¼ˆä¸‰æ¡æ¨ªçº¿ï¼‰
3. é€‰æ‹©"Pip"
4. ä¾æ¬¡å®‰è£…ä»¥ä¸‹åº“ï¼š

```
pandas
numpy
matplotlib
scikit-learn
akshare
requests
lxml
beautifulsoup4
openpyxl
kivy
```

### æ­¥éª¤3ï¼šå¯¼å…¥ä»£ç 
1. å°†`main.py`æ–‡ä»¶å¤åˆ¶åˆ°æ‰‹æœº
2. åœ¨Pydroid 3ä¸­æ‰“å¼€`main.py`
3. ç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼ˆé»„è‰²ä¸‰è§’å½¢ï¼‰

### æ­¥éª¤4ï¼šè¿è¡Œåº”ç”¨
åº”ç”¨å°†åœ¨Pydroid 3ç¯å¢ƒä¸­è¿è¡Œï¼Œæ˜¾ç¤ºKivyå›¾å½¢ç•Œé¢ã€‚

---

## ğŸŒ æ–¹æ¡ˆä¸‰ï¼šWebåº”ç”¨ï¼ˆHarmonyOS Nextï¼‰

å¯¹äºHarmonyOS Nextç³»ç»Ÿï¼ˆä¸å…¼å®¹å®‰å“ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨Webæ–¹æ¡ˆï¼š

### ä½¿ç”¨Pyodide + Flask

#### 1. åˆ›å»ºWebåº”ç”¨
```python
# web_app.py
from flask import Flask, render_template, request, jsonify
import json

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/analyze', methods=['POST'])
def analyze():
    code = request.json.get('code')
    # è°ƒç”¨åˆ†æå‡½æ•°
    result = analyze_stock_web(code)
    return jsonify(result)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

#### 2. åˆ›å»ºå‰ç«¯ç•Œé¢
```html
<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>è‚¡ç¥¨åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
    <h1>è‚¡ç¥¨ä»·æ ¼èšç±»åˆ†æ</h1>
    <input type="text" id="stockCode" placeholder="è¾“å…¥è‚¡ç¥¨ä»£ç ">
    <button onclick="analyze()">åˆ†æ</button>
    <div id="result"></div>
    
    <script>
        async function analyze() {
            // ä½¿ç”¨Pyodideè¿è¡ŒPythonä»£ç 
            let pyodide = await loadPyodide();
            await pyodide.loadPackage(['pandas', 'numpy', 'matplotlib', 'scikit-learn']);
            // ... è¿è¡Œåˆ†æä»£ç 
        }
    </script>
</body>
</html>
```

#### 3. éƒ¨ç½²åˆ°æœåŠ¡å™¨
å°†Webåº”ç”¨éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡é¸¿è’™æ‰‹æœºæµè§ˆå™¨è®¿é—®ã€‚

---

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ‰“åŒ…å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Build failed`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…ç†ç¼“å­˜
buildozer android clean

# é‡æ–°æ„å»º
buildozer android debug
```

### é—®é¢˜2ï¼šä¾èµ–åº“å®‰è£…å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Could not find a version that satisfies the requirement`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ›´æ–°pip
pip install --upgrade pip

# ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### é—®é¢˜3ï¼šåº”ç”¨é—ªé€€

**å¯èƒ½åŸå› **ï¼š
1. å†…å­˜ä¸è¶³
2. ç¼ºå°‘æƒé™
3. ä¾èµ–åº“ç‰ˆæœ¬ä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥`buildozer.spec`ä¸­çš„æƒé™é…ç½®
2. é™ä½matplotlibå›¾è¡¨åˆ†è¾¨ç‡
3. å‡å°‘æ•°æ®è·å–èŒƒå›´

### é—®é¢˜4ï¼šå›¾è¡¨ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# åœ¨main.pyä¸­ä¿®æ”¹å›¾è¡¨ä¿å­˜è·¯å¾„
chart_path = os.path.join(self.get_app_path(), chart_filename)

# ç¡®ä¿ç›®å½•å­˜åœ¨
if not os.path.exists(os.path.dirname(chart_path)):
    os.makedirs(os.path.dirname(chart_path))
```

### é—®é¢˜5ï¼šç½‘ç»œè¯·æ±‚å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```ini
# åœ¨buildozer.specä¸­æ·»åŠ ç½‘ç»œæƒé™
android.permissions = INTERNET,ACCESS_NETWORK_STATE
```

---

## ğŸ“‹ æ–‡ä»¶è¯´æ˜

```
stock_analyzer_app/
â”œâ”€â”€ main.py              # ä¸»ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ buildozer.spec       # Buildozeré…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ éƒ¨ç½²è¯´æ˜.md          # æœ¬è¯´æ˜æ–‡æ¡£
â””â”€â”€ bin/                 # æ„å»ºè¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ *.apk            # ç”Ÿæˆçš„APKæ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¦‚æœæ‚¨æœ‰Linux/Macç¯å¢ƒï¼š

```bash
# 1. å®‰è£…buildozer
pip install buildozer

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd stock_analyzer_app

# 3. æ„å»ºAPK
buildozer android debug

# 4. å®‰è£…åˆ°æ‰‹æœº
adb install bin/*.apk
```

### å¦‚æœæ‚¨åªæœ‰Windowsç¯å¢ƒï¼š

1. ä½¿ç”¨WSLï¼ˆWindows Subsystem for Linuxï¼‰
2. æˆ–è€…ä½¿ç”¨Dockerå®¹å™¨
3. æˆ–è€…ä½¿ç”¨è™šæ‹Ÿæœº

### å¦‚æœæ‚¨æ²¡æœ‰å¼€å‘ç¯å¢ƒï¼š

1. ä½¿ç”¨æ–¹æ¡ˆäºŒï¼ˆPydroid 3ï¼‰ç›´æ¥è¿è¡Œ
2. æˆ–è€…å°†ä»£ç ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨æ‰“åŒ…

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œæƒé™**ï¼šåº”ç”¨éœ€è¦è®¿é—®ç½‘ç»œè·å–è‚¡ç¥¨æ•°æ®
2. **å­˜å‚¨æƒé™**ï¼šåº”ç”¨éœ€è¦ä¿å­˜å›¾è¡¨åˆ°æœ¬åœ°
3. **æ•°æ®å®‰å…¨**ï¼šè‚¡ç¥¨æ•°æ®æ¥è‡ªå…¬å¼€æ¥å£ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒ
4. **æ€§èƒ½è€ƒè™‘**ï¼šç§»åŠ¨è®¾å¤‡æ€§èƒ½æœ‰é™ï¼Œåˆ†æå¤§é‡æ•°æ®å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Kivyå®˜æ–¹æ–‡æ¡£](https://kivy.org/doc/stable/)
- [Buildozeræ–‡æ¡£](https://buildozer.readthedocs.io/)
- [Python for Android](https://python-for-android.readthedocs.io/)
- [AKShareæ–‡æ¡£](https://www.akshare.xyz/)

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹Kivyç¤¾åŒºè®ºå›
2. æŸ¥é˜…Buildozeræ–‡æ¡£
3. å‚è€ƒAKShareä½¿ç”¨æŒ‡å—

---

## ğŸ“„ è®¸å¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ“ˆğŸ“±
